This is the implementation of concept 3 for the esp32's